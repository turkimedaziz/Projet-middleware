{% for msg in messages %}
<tr class="hover:bg-gray-50 transition-colors">
    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm text-gray-500 sm:pl-6">
        {{ msg.timestamp|date:"Y-m-d H:i:s.u" }}
    </td>
    <td class="whitespace-nowrap px-3 py-4 text-sm">
        {% if msg.status == 'processed' %}
        <span
            class="inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">Processed</span>
        {% else %}
        <span
            class="inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-inset ring-yellow-600/20">Filtered</span>
        {% endif %}
    </td>
    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-600 font-mono text-xs">
        {{ msg.in_topic }}
    </td>
    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-600 font-mono text-xs">
        {{ msg.out_topic|default:"-" }}
    </td>
    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
        {{ msg.qos }}
    </td>
    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
        {{ msg.time_ms|floatformat:2 }}
    </td>
    <td class="px-3 py-4 text-sm text-gray-500 font-mono text-xs max-w-xs truncate">
        {{ msg.payload }}
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="7" class="px-3 py-10 text-center text-sm text-gray-500">
        No messages found yet. Start the middleware and publishers!
    </td>
</tr>
{% endfor %}